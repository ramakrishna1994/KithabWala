if(typeof console==="undefined"){console={}}if(!console["log"]){console.log=function(e){}}var consoleFcns=["info","debug","warn","error"];for(var i=0;i<consoleFcns.length;i++){var fname=consoleFcns[i];if(!console[fname]){console[fname]=function(e){console.log(fname+": "+e)}}}(function(e,n){if(typeof exports==="object"){module.exports=n()}else if(typeof define==="function"&&define.amd){define(n)}else{e.printStackTrace=n()}})(this,function(){function e(n){n=n||{guess:true};var r=n.e||null,t=!!n.guess;var o=new e.implementation,i=o.run(r);return t?o.guessAnonymousFunctions(i):i}e.implementation=function(){};e.implementation.prototype={run:function(e,n){e=e||this.createException();n=n||this.mode(e);if(n==="other"){return this.other(arguments.callee)}else{return this[n](e)}},createException:function(){try{this.undef()}catch(e){return e}},mode:function(e){if(e["arguments"]&&e.stack){return"chrome"}else if(e.stack&&e.sourceURL){return"safari"}else if(e.stack&&e.number){return"ie"}else if(e.stack&&e.fileName){return"firefox"}else if(e.message&&e["opera#sourceloc"]){if(!e.stacktrace){return"opera9"}if(e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length){return"opera9"}return"opera10a"}else if(e.message&&e.stack&&e.stacktrace){if(e.stacktrace.indexOf("called from line")<0){return"opera10b"}return"opera11"}else if(e.stack&&!e.fileName){return"chrome"}return"other"},instrumentFunction:function(n,r,t){n=n||window;var o=n[r];n[r]=function i(){t.call(this,e().slice(4));return n[r]._instrumented.apply(this,arguments)};n[r]._instrumented=o},deinstrumentFunction:function(e,n){if(e[n].constructor===Function&&e[n]._instrumented&&e[n]._instrumented.constructor===Function){e[n]=e[n]._instrumented}},chrome:function(e){return(e.stack+"\n").replace(/^\s+(at eval )?at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}() ($1)$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}() ($1)").replace(/^(.+) \((.+)\)$/gm,"$1@$2").split("\n").slice(1,-1)},safari:function(e){return e.stack.replace(/\[native code\]\n/m,"").replace(/^(?=\w+Error\:).*$\n/m,"").replace(/^@/gm,"{anonymous}()@").split("\n")},ie:function(e){return e.stack.replace(/^\s*at\s+(.*)$/gm,"$1").replace(/^Anonymous function\s+/gm,"{anonymous}() ").replace(/^(.+)\s+\((.+)\)$/gm,"$1@$2").split("\n").slice(1)},firefox:function(e){return e.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^(?:\((\S*)\))?@/gm,"{anonymous}($1)@").split("\n")},opera11:function(e){var n="{anonymous}",r=/^.*line (\d+), column (\d+)(?: in (.+))? in (\S+):$/;var t=e.stacktrace.split("\n"),o=[];for(var i=0,s=t.length;i<s;i+=2){var c=r.exec(t[i]);if(c){var a=c[4]+":"+c[1]+":"+c[2];var u=c[3]||"global code";u=u.replace(/<anonymous function: (\S+)>/,"$1").replace(/<anonymous function>/,n);o.push(u+"@"+a+" -- "+t[i+1].replace(/^\s+/,""))}}return o},opera10b:function(e){var n=/^(.*)@(.+):(\d+)$/;var r=e.stacktrace.split("\n"),t=[];for(var o=0,i=r.length;o<i;o++){var s=n.exec(r[o]);if(s){var c=s[1]?s[1]+"()":"global code";t.push(c+"@"+s[2]+":"+s[3])}}return t},opera10a:function(e){var n="{anonymous}",r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i;var t=e.stacktrace.split("\n"),o=[];for(var i=0,s=t.length;i<s;i+=2){var c=r.exec(t[i]);if(c){var a=c[3]||n;o.push(a+"()@"+c[2]+":"+c[1]+" -- "+t[i+1].replace(/^\s+/,""))}}return o},opera9:function(e){var n="{anonymous}",r=/Line (\d+).*script (?:in )?(\S+)/i;var t=e.message.split("\n"),o=[];for(var i=2,s=t.length;i<s;i+=2){var c=r.exec(t[i]);if(c){o.push(n+"()@"+c[2]+":"+c[1]+" -- "+t[i+1].replace(/^\s+/,""))}}return o},other:function(e){var n="{anonymous}",r=/function\s*([\w\-$]+)?\s*\(/i,t=[],o,i,s=10;while(e&&e["arguments"]&&t.length<s){o=r.test(e.toString())?RegExp.$1||n:n;i=Array.prototype.slice.call(e["arguments"]||[]);t[t.length]=o+"("+this.stringifyArguments(i)+")";e=e.caller}return t},stringifyArguments:function(e){var n=[];var r=Array.prototype.slice;for(var t=0;t<e.length;++t){var o=e[t];if(o===undefined){n[t]="undefined"}else if(o===null){n[t]="null"}else if(o.constructor){if(o.constructor===Array){if(o.length<3){n[t]="["+this.stringifyArguments(o)+"]"}else{n[t]="["+this.stringifyArguments(r.call(o,0,1))+"..."+this.stringifyArguments(r.call(o,-1))+"]"}}else if(o.constructor===Object){n[t]="#object"}else if(o.constructor===Function){n[t]="#function"}else if(o.constructor===String){n[t]='"'+o+'"'}else if(o.constructor===Number){n[t]=o}}}return n.join(",")},sourceCache:{},ajax:function(e){var n=this.createXMLHTTPObject();if(n){try{n.open("GET",e,false);n.send(null);return n.responseText}catch(r){}}return""},createXMLHTTPObject:function(){var e,n=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];for(var r=0;r<n.length;r++){try{e=n[r]();this.createXMLHTTPObject=n[r];return e}catch(t){}}},isSameDomain:function(e){return typeof location!=="undefined"&&e.indexOf(location.hostname)!==-1},getSource:function(e){if(!(e in this.sourceCache)){this.sourceCache[e]=this.ajax(e).split("\n")}return this.sourceCache[e]},guessAnonymousFunctions:function(e){for(var n=0;n<e.length;++n){var r=/\{anonymous\}\(.*\)@(.*)/,t=/^(.*?)(?::(\d+))(?::(\d+))?(?: -- .+)?$/,o=e[n],i=r.exec(o);if(i){var s=t.exec(i[1]);if(s){var c=s[1],a=s[2],u=s[3]||0;if(c&&this.isSameDomain(c)&&a){var f=this.guessAnonymousFunction(c,a,u);e[n]=o.replace("{anonymous}",f)}}}}return e},guessAnonymousFunction:function(e,n,r){var t;try{t=this.findFunctionName(this.getSource(e),n)}catch(o){t="getSource failed with url: "+e+", exception: "+o.toString()}return t},findFunctionName:function(e,n){var r=/function\s+([^(]*?)\s*\(([^)]*)\)/;var t=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/;var o=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/;var i="",s,c=Math.min(n,20),a,u;for(var f=0;f<c;++f){s=e[n-f-1];u=s.indexOf("//");if(u>=0){s=s.substr(0,u)}if(s){i=s+i;a=t.exec(i);if(a&&a[1]){return a[1]}a=r.exec(i);if(a&&a[1]){return a[1]}a=o.exec(i);if(a&&a[1]){return a[1]}}}return"(?)"}};return e});if(typeof M==="undefined"){M={}}function ServerLogger(e){this.namespace=e;this.countSends=0}ServerLogger.MAX_SENDS=100;ServerLogger.prototype.log=function(e){this._send("INFO",e);console.log(e)};ServerLogger.prototype.debug=function(e){this._send("DEBUG",e);console.debug(e)};ServerLogger.prototype.warn=function(e){this._send("WARN",e);console.warn(e)};ServerLogger.prototype.error=function(e,n){this._send("ERROR",e,n);console.error(e)};ServerLogger.prototype._send=function(e,n,r){this.countSends++;if(this.countSends>ServerLogger.MAX_SENDS){console.warn("Ignoring message.  ServerLogger has reached its quota.");return}if(typeof n!="string"){throw"Invalid msg"}var t={level:e,msg:n,module:M.LOG_MODULE_VIEW,url:window.location.href,browser:navigator.userAgent,referer:document.referrer};for(var o in r||{}){var i=r[o];t[o]=i}if(typeof CDN_VERSION!="undefined"){t.cdnVersion=CDN_VERSION}var s=new XMLHttpRequest;var c=[];for(var a in t){var u=t[a];var f=encodeURIComponent(a)+"="+encodeURIComponent(u);f=f.replace(/%20/g,"+");c.push(f)}var l=c.join("&").replace(/%20/g,"+");s.open("POST","/personalize/client_logger");s.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");s.setRequestHeader("X-Requested-With","XMLHttpRequest");s.send(l)};var _serverLogger=new ServerLogger;(function(){"use strict";var e=true;window.onbeforeunload=function(){e=false};window.onerror=function(n,r,t,o,i){var s;if(i){s=printStackTrace({e:i}).join("\n")}var c={line:t,filename:r,column:o,stack:s};var a;try{a=JSON.stringify(n)}catch(u){a=""+n}if(typeof cu3!="undefined"){c.recentJQueryEvents=cu3.recentJQueryEvents.toString()}if(e){_serverLogger.error(a,c);if(typeof NREUM!=="undefined"){NREUM.noticeError(i)}}else{console.debug("error not reported due to onbeforeunload event",a,c);return true}}})();
//# sourceMappingURL=error_handler.js.map